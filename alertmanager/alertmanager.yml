global:
  smtp_smarthost: 'localhost:587'
  smtp_from: 'alerts@company.com'
  smtp_auth_username: 'alerts@company.com'
  smtp_auth_password: 'password'

# ì•Œë¦¼ ê·¸ë£¹í™” ë° ë¼ìš°íŒ… ê·œì¹™
route:
  group_by: ['alertname', 'service', 'environment']
  group_wait: 10s
  group_interval: 5m
  repeat_interval: 12h
  receiver: 'default-receiver'
  
  routes:
  # ì‹¬ê°í•œ ì•Œë¦¼ (ì¦‰ì‹œ ì „ì†¡)
  - match:
      severity: critical
    receiver: 'critical-alerts'
    group_wait: 0s
    repeat_interval: 5m
    
  # ì—ëŸ¬ ë¡œê·¸ ì•Œë¦¼
  - match:
      alertname: ErrorLogAlert
    receiver: 'error-alerts'
    group_interval: 2m
    
  # ì„±ëŠ¥ ì•Œë¦¼
  - match:
      alertname: HighResponseTime
    receiver: 'performance-alerts'
    
  # ì‹œìŠ¤í…œ ì•Œë¦¼
  - match:
      type: system
    receiver: 'system-alerts'

# ì•Œë¦¼ ìˆ˜ì‹ ì ì„¤ì •
receivers:
- name: 'default-receiver'
  email_configs:
  - to: 'devops@company.com'
    subject: '[{{ .GroupLabels.environment }}] {{ .GroupLabels.alertname }}'
    body: |
      {{ range .Alerts }}
      Alert: {{ .Annotations.summary }}
      Description: {{ .Annotations.description }}
      Service: {{ .Labels.service }}
      Environment: {{ .Labels.environment }}
      Time: {{ .StartsAt }}
      {{ end }}

- name: 'critical-alerts'
  email_configs:
  - to: 'oncall@company.com'
    subject: 'ğŸš¨ CRITICAL: {{ .GroupLabels.alertname }}'
    body: |
      CRITICAL ALERT TRIGGERED
      ========================
      {{ range .Alerts }}
      Alert: {{ .Annotations.summary }}
      Description: {{ .Annotations.description }}
      Service: {{ .Labels.service }}
      Environment: {{ .Labels.environment }}
      Severity: {{ .Labels.severity }}
      Time: {{ .StartsAt }}
      
      Runbook: {{ .Annotations.runbook_url }}
      {{ end }}
  
  slack_configs:
  - api_url: 'YOUR_SLACK_WEBHOOK_URL'
    channel: '#alerts-critical'
    title: 'ğŸš¨ Critical Alert: {{ .GroupLabels.alertname }}'
    text: |
      {{ range .Alerts }}
      *Service*: {{ .Labels.service }}
      *Environment*: {{ .Labels.environment }}
      *Description*: {{ .Annotations.description }}
      *Time*: {{ .StartsAt }}
      {{ end }}

- name: 'error-alerts'
  slack_configs:
  - api_url: 'YOUR_SLACK_WEBHOOK_URL'
    channel: '#alerts-errors'
    title: 'âŒ Error Alert: {{ .GroupLabels.alertname }}'
    text: |
      {{ range .Alerts }}
      *Service*: {{ .Labels.service }}
      *Error Count*: {{ .Labels.error_count }}
      *Time Range*: Last 5 minutes
      {{ end }}

- name: 'performance-alerts'
  slack_configs:
  - api_url: 'YOUR_SLACK_WEBHOOK_URL'
    channel: '#alerts-performance'
    title: 'âš¡ Performance Alert: {{ .GroupLabels.alertname }}'
    text: |
      {{ range .Alerts }}
      *Service*: {{ .Labels.service }}
      *Response Time*: {{ .Labels.response_time }}ms
      *Threshold*: {{ .Annotations.threshold }}
      {{ end }}

- name: 'system-alerts'
  email_configs:
  - to: 'sysadmin@company.com'
    subject: '[SYSTEM] {{ .GroupLabels.alertname }}'

# ì•Œë¦¼ ì–µì œ ê·œì¹™ (ì¤‘ë³µ ì•Œë¦¼ ë°©ì§€)
inhibit_rules:
- source_match:
    severity: 'critical'
  target_match:
    severity: 'warning'
  equal: ['alertname', 'service', 'environment']

- source_match:
    alertname: 'ServiceDown'
  target_match_re:
    alertname: '.*'
  equal: ['service']